# 差异化消息攻击 - 5分钟快速指南

## 🚀 快速开始

### 什么是差异化消息攻击？

**简单说**：恶意节点向不同的节点发送不同的值，试图制造混乱。

**例子**：
- 正常情况：节点2向所有人说"我选A"
- 差异化攻击：节点2对节点0说"我选A"，对节点1说"我选B"

## 📱 使用步骤

### 1. 进入拜占庭模式

```
加入节点 → 等待新一轮 → 点击"拜占庭攻击"
```

### 2. 打开差异化消息

点击 **"发送差异化消息"** 按钮（在"发送错误信息"按钮下方）

### 3. 配置消息

为每个节点选择发送的值：
- ✅ **正确值**：发送当前共识值
- ❌ **错误值**：发送相反的值

或使用快速设置：
- **全部正确**：相当于正常行为
- **全部错误**：全部发送错误值
- **随机**：随机混合（制造最大混乱）

### 4. 执行攻击

点击 **"🚀 执行差异化发送"**

## 🎯 典型场景

### 场景A：对半分（最经典）

```
✅ 节点0: 正确值
✅ 节点1: 正确值
❌ 节点3: 错误值
❌ 节点4: 错误值
```

**效果**：制造严重分歧，测试系统容错能力

### 场景B：孤立攻击

```
❌ 节点0: 错误值（目标）
✅ 节点1: 正确值
✅ 节点3: 正确值
✅ 节点4: 正确值
```

**效果**：孤立节点0，观察其他节点如何忽略错误值

### 场景C：随机混乱

点击 **"随机"** 按钮

**效果**：完全随机的值分配，模拟最混乱的场景

## 📊 观察结果

### 后端日志

```
🦹 节点 2 发起差异化准备消息攻击
✅ 差异化攻击：节点 2 向节点 0 发送值 0
✅ 差异化攻击：节点 2 向节点 1 发送值 1
✅ 差异化攻击：节点 2 向节点 3 发送值 0
✅ 差异化攻击：节点 2 向节点 4 发送值 1
```

### 前端提示

```
🦹 执行差异化攻击：2个正确值，2个错误值
```

### 各节点收到的消息

- 节点0收到值0
- 节点1收到值1
- 节点3收到值0
- 节点4收到值1

## 🛡️ PBFT如何抵御？

### 容错原理

系统需要 **2f+1** 个节点同意才能达成共识：
- 4个节点系统：需要3个同意（容忍1个恶意）
- 7个节点系统：需要5个同意（容忍2个恶意）

### 实际效果

即使发送了差异化消息：
1. 诚实节点会比较收到的消息
2. 多数诚实节点会达成一致
3. 恶意节点的干扰会被过滤掉

## 💡 快速测试

### 测试1：验证容错（30秒）

1. 打开差异化消息配置
2. 点击"随机"
3. 点击"执行差异化发送"
4. 观察共识是否成功

### 测试2：对比攻击（1分钟）

**第一次**：
- 点击"全部错误"
- 执行发送
- 观察效果

**第二次**（下一轮）：
- 点击"随机"
- 执行发送
- 对比哪种攻击更有效

### 测试3：组合攻击（2分钟）

1. **设置可靠性**：
   - 节点0: 100%
   - 节点1: 50%
   - 节点3: 0%

2. **设置差异化**：
   - 节点0: 错误值
   - 节点1: 正确值
   - 节点3: 错误值

3. **执行并观察**：
   - 节点0收到错误值
   - 节点1有50%概率收到
   - 节点3收不到消息

## 🎓 为什么有用？

### 教学价值

1. **理解拜占庭问题**：
   - 体验"将军"发送不同命令的场景
   - 理解分布式系统的核心挑战

2. **验证算法正确性**：
   - 测试PBFT是否真的能容错
   - 找到算法的容错边界

3. **对比不同攻击**：
   - 统一错误 vs 差异化错误
   - 哪种更难防御？

### 研究价值

1. **性能测试**：差异化攻击对性能的影响
2. **边界测试**：在f = n/3边界时的表现
3. **实战模拟**：真实网络环境的复杂攻击

## ⚠️ 注意事项

1. ⚠️ **必须在拜占庭攻击模式下**
2. ⚠️ **必须在准备或提交阶段**
3. ⚠️ **配置后才能执行**
4. ⚠️ **每次点击都会发送一次**

## 🎯 Pro技巧

### 技巧1：搭配可靠性使用

```
可靠性矩阵 + 差异化消息 = 超强攻击组合
```

### 技巧2：多轮测试

```
第1轮：全部正确（基准）
第2轮：一半错误
第3轮：随机
第4轮：全部错误
```

对比各轮共识结果

### 技巧3：记录数据

记录每次攻击的：
- 配置（正确/错误数量）
- 可靠性设置
- 共识结果（成功/失败）
- 时间消耗

## 📚 更多信息

- **详细文档**：`DIFFERENTIAL_MESSAGE_GUIDE.md`
- **系统说明**：`README.md`
- **可靠性控制**：`MESSAGE_RELIABILITY_GUIDE.md`

## ✨ 功能亮点

- 🎯 **直观配置**：单选按钮，一目了然
- ⚡ **快速设置**：一键全部正确/错误/随机
- 📊 **实时反馈**：显示发送统计
- 🔗 **无缝集成**：与可靠性控制完美配合
- 📝 **详细日志**：后端清晰记录每条消息

---

**5分钟上手，深入理解拜占庭容错！**

现在就试试差异化消息攻击，体验PBFT的强大容错能力！ 🚀






